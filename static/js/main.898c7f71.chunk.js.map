{"version":3,"sources":["store.js","dashboard.js","model.js","App.js","serviceWorker.js","index.js"],"names":["CTX","React","createContext","msg","user","addMsg","addUser","deleteUser","setToken","authToken","Store","props","initState","newMsg","newArray","state","push","setState","newUser","token","useState","Provider","value","children","useStyles","makeStyles","theme","root","margin","padding","spacing","flex","display","alignItems","userWindow","width","height","borderRight","chatWindow","chatBox","button","Dashboard","classes","useContext","textValue","changeTextValue","Paper","className","Typography","variant","component","List","map","ListItem","key","ListItemText","primary","chat","i","Chip","label","chip","created","event","message","status","TextField","onChange","e","target","Button","color","onClick","console","log","xhr","XMLHttpRequest","open","FD","FormData","append","setRequestHeader","onreadystatechange","readyState","send","sendMessage","Popup","username","password","showPopup","handleChangeUsername","bind","handleChangePassword","handleSubmit","startEventSource","this","eventSource","EventSource","context","messageAdder","userAdder","addEventListener","jsonData","JSON","parse","data","preventDefault","tokenSetter","jsonResponse","responseText","style","position","top","left","right","bottom","backgroundColor","borderRadius","background","text","onSubmit","type","name","Component","contextType","App","history","users","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.898c7f71.chunk.js","sourcesContent":["import React from 'react'\n\nexport const CTX = React.createContext({\n    msg:[{\"event\":\"ServerStatus\", \"created\":\"2019-10-28 03:16:10 -0700\", \"user\":\"\", \"message\":\"\", \"status\":\"started\"}\n    ,{\"event\":\"ServerStatus\", \"created\":\"2019-10-28 03:16:10 -0900\", \"user\":\"\", \"message\":\"\", \"status\":\"startedAgain\"}],\n    user:[\"user1\", \"Sekiro\", \"Gehrman\"],\n    addMsg: () => {},\n    addUser: () => {},\n    deleteUser: () => {},\n    setToken:() => {},\n    authToken:''\n});\n\n\n/*\nfunction reducer(state, action){\n\t\treturn{ \n\t\t\t...state,\n\t        arr: [...state.arr, action.newItem]\n\t\t}\n}\n*/\n\nfunction sendChatAction(value){\n\n}\n\nexport default function Store(props){\n\n\tconst addMsg = (newMsg) =>{\n\t\tvar newArray = state.msg;\n\t\tnewArray.push(newMsg);  \n\t\tsetState({...state , msg:newArray})\n\t}\n\n\tconst addUser = (newUser) =>{\n\t\tvar newArray = state.user;\n\t\tnewArray.push(newUser);  \n\t\tsetState({...state, user:newArray})\n\t}\n\n\tconst setToken = (token) =>{\n\t\tstate.authToken = token\n\t}\n\n\tconst deleteUser = (partedUser) =>{\n\t\tvar newState = {...state} \n\t\tnewState.user = newState.user.filter(user => user !== partedUser)\n\t\tsetState({newState})\n\t}\n\n\tconst initState = {\n\t\tmsg:[{\"event\":\"ServerStatus\", \"created\":\"2019-10-28 03:16:10 -0700\", \"user\":\"\", \"message\":\"\", \"status\":\"started\"}\n    \t,{\"event\":\"ServerStatus\", \"created\":\"2019-10-28 03:16:10 -0900\", \"user\":\"\", \"message\":\"\", \"status\":\"startedAgain\"}],\t    \n        user:[\"user1\", \"Sekiro\", \"Gehrman\"],\n\t    addMsg: addMsg,\n\t    addUser: addUser,\n\t    setToken: setToken,\n\t    authToken:''\n\t}\n\n\n\tconst [state, setState] = React.useState(initState)\n\n\treturn (\n\t\t<CTX.Provider value = {state}>\n\t\t\t{props.children}\n\t\t</CTX.Provider>\n\t)\n} ","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Chip from '@material-ui/core/Chip';  \nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport {CTX} from './store'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: \"100px\",\n    padding: theme.spacing(3, 2),\n  },\n\n  flex:{\n    display:'flex',\n    alignItems:'center'\n  },\n\n  userWindow:{\n    width:'30%',\n    height: '500px',\n    borderRight: '1px solid black'\n  },\n\n  chatWindow:{\n    width:'70%',\n    height: '500px',\n    padding:'30px'\n  },\n\n  chatBox:{\n    width:'85%'\n  },\n\n  button:{\n    width:'15%'\n  }\n\n}));\n\nfunction sendMessage(value, token){\n\n  console.log(\"The passed in token is \" + token)\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"POST\", 'http://localhost:4567/message', true);\n  var FD  = new FormData();\n  FD.append('message', value);\n  xhr.setRequestHeader('Authorization', `Bearer ${token}`);\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4 && xhr.status === 201) {\n       console.log(\"Message received:\" + value)\n    }\n  };\n    xhr.send(FD);\n\n}\n\n\nexport default function Dashboard() {\n  const classes = useStyles();\n  const state = React.useContext(CTX);\n  //const msgAdder = state.addMsg;\n  //var js = JSON.parse(state.msg)\n  //console.log(state.msg[Object.keys(state.msg)[0]].event);\n  const [textValue, changeTextValue] = React.useState('');\n\n  return (\n    <div>\n      <Paper className={classes.root}>\n        <Typography variant=\"h5\" component=\"h3\">\n          Chat App\n        </Typography>\n \n        <Typography component=\"p\">\n          Placeholder\n        </Typography>\n\n        <div className={classes.flex}>\n          <div className={classes.userWindow}>\n            <List>\n            {\n              state.user.map(user => \n              (\n                <ListItem key = {user} button>\n                  <ListItemText primary= {user} />\n                </ListItem>\n              ))\n            }\n            \n            \n\n            </List>\n\n          </div>\n\n          <div className={classes.chatWindow}>\n\n          {\n            state.msg.map((chat, i) => (\n              <div className={classes.flex} key={i}>\n                <Chip label={chat.user} className={classes.chip} />\n                <Typography component=\"p\">{chat.created} {chat.event} {chat.user} {chat.message} {chat.status} </Typography>\n              </div>\n              ))\n          }\n\n          </div>\n        </div>\n\n        <TextField  \n          label=\"send a message\"\n          className={classes.chatBox}\n          value={textValue}\n          onChange={e => changeTextValue(e.target.value)}\n        />\n\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          className={classes.button}\n          onClick ={() => {\n            {sendMessage(textValue, state.authToken)};\n            changeTextValue('');\n          }\n\n          } \n        >\n          Send\n        </Button>\n\n\n      </Paper>\n    </div>\n  );\n}","import React from 'react'; \nimport {CTX} from './store'\n\n\n\nclass Popup extends React.Component {  \n\nstatic contextType = CTX\n\n\nconstructor(props) {\n    super(props);\n    this.state = {username: '', password: '', showPopup: true,};\n    this.handleChangeUsername = this.handleChangeUsername.bind(this);\n    this.handleChangePassword = this.handleChangePassword.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.startEventSource = this.startEventSource.bind(this);\n }\n\n\n startEventSource(token) {\n  \n  console.log(\"eventSource started\")\n  this.eventSource = new EventSource(`http://localhost:4567/stream/${token}`);\n  const msg = this.context.msg\n  \n  const messageAdder = this.context.addMsg\n  const userAdder = this.context.addUser\n  const userDeleter = this.context.deleteUser\n  \n  \n  \n   this.eventSource.addEventListener(\"Disconnect\", e =>{\n\tvar jsonData = JSON.parse(e.data)\n\tmessageAdder({\"event\":\"Disconnect\", \"created\":`${jsonData.created}`, \"user\":\"\", \"users\":\"\", \"message\":\"\", \"status\":\"\"})\n\tconsole.log(\"Disconnect\")\n\t}\t\n   );\n\n    this.eventSource.addEventListener(\"Message\", e =>{\n    \tvar jsonData = JSON.parse(e.data)\n\t\tmessageAdder({\"event\":\"Message\", \"created\":`${jsonData.created}`, \"user\":`${jsonData.user}`, \"users\":\"\", \"message\":`${jsonData.message}`, \"status\":\"\"})\n\t\tconsole.log(\"Message from: \" + jsonData.user )  \n\t\t}  \n\n\t);\n\n    this.eventSource.addEventListener(\"Join\", e =>{\n      var jsonData = JSON.parse(e.data)\n      messageAdder({\"event\":\"Join\", \"created\":`${jsonData.created}`, \"user\":`${jsonData.user}`, \"users\":\"\", \"message\":\"\", \"status\":\"\"})\n      userAdder(jsonData.user)\n\t  console.log(\"Join\")    \n\t  }\n    );\n\n    this.eventSource.addEventListener(\"Part\", e =>{\n      var jsonData = JSON.parse(e.data)\n      messageAdder({\"event\":\"Part\", \"created\":`${jsonData.created}`, \"user\":`${jsonData.user}`, \"users\":\"\", \"message\":\"\", \"status\":\"\"})\n\t  console.log(\"Part\") }\n\n\t   );\n\n    this.eventSource.addEventListener(\"ServerStatus\", e =>{\n\t  var jsonData = JSON.parse(e.data)\n      messageAdder({\"event\":\"ServerStatus\", \"created\":`${jsonData.created}`, \"user\":\"\", \"users\":\"\", \"message\":\"\", \"status\":\"server started\"})\n\t  console.log(\"ServerStatus\") \n\t}\n   );\n\n    this.eventSource.addEventListener(\"Users\", e =>{\n      var jsonData = JSON.parse(e.data)\n      messageAdder({\"event\":\"Users\", \"created\":`${jsonData.created}`, \"user\":\"\", \"users\":`jsonData.users`, \"message\":\"\", \"status\":\"\"})\n\t  console.log(\"Users\")\n\t}\n    );\n}\n\n handleChangeUsername(event) {\n    this.setState({username: event.target.value});\n }\n\n handleChangePassword(event) {\n    this.setState({password: event.target.value});\n }\n\nhandleSubmit(event){\n\t\n\tevent.preventDefault();\n\t//this.props.handleSubmit(this.state.username, this.state.password);\n    var xhr = new XMLHttpRequest();\n    var FD  = new FormData();\n    var tk = '';\n    FD.append('username', this.state.username);\n    FD.append('password', this.state.password);\n    \n    \n    xhr.open(\"POST\", 'http://localhost:4567/login', true);\n    xhr.onreadystatechange = (tokenSetter) => {\n    if (xhr.readyState === 4 && xhr.status === 201) {\n    \tconst tokenSetter = this.context.setToken\n       var jsonResponse = JSON.parse(xhr.responseText);\n       this.startEventSource(jsonResponse[\"token\"]);\n       tokenSetter(jsonResponse[\"token\"])\n    }\n  };\n    xhr.send(FD);\n    this.props.handleSubmit()\n    //tokenSetter(tk);\n}\n\nrender() {  \n\tconst popupStyle = {  \n  position: 'fixed',  \n  width: \"100%\",  \n  height: \"100%\",  \n  top: '0',  \n  left: '0',  \n  right: '0',  \n  bottom: '0',  \n  margin: 'auto', \n  backgroundColor: \"grey\",  \n} ;\n\nconst popupInnerStyle = {  \n  position: 'absolute',  \n  left: '25%',  \n  right: '25%',  \n  top: '25%',  \n  bottom: '25%', \n  margin: 'auto',  \n  borderRadius: '20px',  \n  background: 'white',  \n} ;\n\n\treturn (  \n\t<div style={popupStyle} className='popup'>  \n\t\t<div style={popupInnerStyle} className='popupInner'>  \n\t\t\t<h1>{this.props.text}</h1>  \n\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\tusername: \n\t\t\t    <input type=\"text\" name=\"username\" onChange={this.handleChangeUsername}/>\n\t\t\t    <br/>\n\t\t\t    password: \n\t\t\t    <input type=\"text\" name=\"password\" onChange={this.handleChangePassword}/>\n\t\t\t     <br/>\n\t\t\t    <input type=\"submit\" value=\"Submit\" />\n\t\t\t</form>  \n\t\t</div>  \n\t</div> \n\t); }  \n}  \n\nexport default Popup;","import React, { Component } from 'react';\nimport './App.css';\nimport Dashboard from './dashboard'\nimport Popup from './model'\nimport Store,  {CTX} from './store'\n\nclass App extends Component {\n\n  static contextType = CTX\n\n  constructor(props) {\n    super(props);\n    this.eventSource = '';\n    this.state = {\n      showPopup: true,\n      history: [],\n      users:[]\n    };\n    //this.startEventSource = this.startEventSource.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n\n\n\n  }\n\nsendMessage = (message) => {\n  console.log('sendMessage', message);\n}\n\n\n/*\nstartEventSource(token) {\n  //const msg = this.context\n  //console.log(msg)\n  console.log(\"eventSource started\")\n  this.eventSource = new EventSource(`http://localhost:4567/stream/${token}`);\n  \n  \n   this.eventSource.addEventListener(\"Disconnect\", e =>\n    this.setState({history: [...this.state.history, JSON.parse(e.data).created + \" \" + \"Disconnect\"]})\n    );\n\n    this.eventSource.addEventListener(\"Message\", e =>\n      this.setState({history: [...this.state.history, JSON.parse(e.data).created + \" \" + JSON.parse(e.data).user + \" \" + JSON.parse(e.data).message + \"Message\"]})\n    );\n\n    this.eventSource.addEventListener(\"Join\", e =>{\n      var msg = JSON.parse(e.data).created + \" \" + JSON.parse(e.data).user + \" \" + \"JOIN\";\n      this.setState({history: [...this.state.history,msg]})\n    }\n    );\n\n    this.eventSource.addEventListener(\"Part\", e =>\n      this.setState({history: [...this.state.history, JSON.parse(e.data).created + \" \" + JSON.parse(e.data).user + \" \" + \"Part\"]})\n    );\n\n    this.eventSource.addEventListener(\"ServerStatus\", e =>\n      this.setState({history: [...this.state.history, JSON.parse(e.data).created + \" \" + JSON.parse(e.data).status + \" \" + \"ServerStatus\"]})\n    );\n\n    this.eventSource.addEventListener(\"Users\", e =>\n      this.setState({history: [...this.state.history, JSON.parse(e.data).created + \" \" + JSON.parse(e.data).users + \" \" + \"Users\"]})\n    );\n}*/\n\n\n\nhandleSubmit(username, password){\n\n\n    this.setState({  \n       showPopup: !this.state.showPopup  \n    }); \n    /*\n    var xhr = new XMLHttpRequest();\n    var FD  = new FormData();\n    FD.append('username', username);\n    FD.append('password', password);\n\n    \n    xhr.open(\"POST\", 'http://localhost:4567/login', true);\n    xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4 && xhr.status === 201) {\n       var jsonResponse = JSON.parse(xhr.responseText);\n       this.startEventSource(jsonResponse[\"token\"])\n    }\n  };\n    xhr.send(FD);*/\n  }\n\n\n\n \n\n    render() {\n    return (\n      <Store>\n      <div className=\"App\">\n        {this.state.showPopup ?  \n          <Popup  \n            text='User Login' \n            handleSubmit = {this.handleSubmit.bind(this)}  \n          />  : null  \n        } \n          <Dashboard />\n        \n      </div>\n      </Store>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}